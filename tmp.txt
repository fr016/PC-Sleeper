function Encrypt-XmlPasswords {
    [CmdletBinding()]
    param (
        [Parameter(Mandatory=$true)]
        [ValidateScript({Test-Path $_ -PathType 'Leaf'})]
        [string]$FilePath
    )

    try {
        # Charger le fichier XML
        $xml = New-Object System.Xml.XmlDocument
        $xml.Load($FilePath)

        # Récupérer toutes les balises <password>
        $passwordNodes = $xml.SelectNodes("//password")

        # Clé de chiffrement prédéfinie (à remplacer par votre propre clé)
        $encryptionKey = "MaCleDeChiffrement"

        # Parcourir les balises <password> et chiffrer leur contenu
        foreach ($node in $passwordNodes) {
            $password = $node.InnerText

            # Chiffrer le mot de passe avec la clé de chiffrement
            $encryptedPassword = ConvertTo-SecureString -String $password -AsPlainText -Force | ConvertFrom-SecureString -Key $encryptionKey

            # Remplacer le contenu de la balise <password> par le mot de passe chiffré
            $node.InnerText = $encryptedPassword
        }

        # Enregistrer les modifications dans le fichier XML
        $xml.Save($FilePath)

        Write-Host "Le chiffrement des mots de passe a été effectué avec succès."
    }
    catch {
        Write-Host "Une erreur s'est produite lors du chiffrement des mots de passe : $_"
    }
}
